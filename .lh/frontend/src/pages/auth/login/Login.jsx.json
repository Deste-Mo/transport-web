{
    "sourceFile": "frontend/src/pages/auth/login/Login.jsx",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 9,
            "patches": [
                {
                    "date": 1720605306017,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1720605340885,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -19,11 +19,11 @@\n     email: \"\",\r\n     password: \"\",\r\n   });\r\n \r\n-  // useEffect(() => {\r\n-  //   if(isAuth) navigate('/home');\r\n-  // }, []);\r\n+  useEffect(() => {\r\n+    if(isAuth) navigate('/home');\r\n+  }, []);\r\n   \r\n   const { email, password } = inputs;\r\n \r\n   const handleLogin = async (e) => {\r\n"
                },
                {
                    "date": 1720605960539,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -19,11 +19,11 @@\n     email: \"\",\r\n     password: \"\",\r\n   });\r\n \r\n-  useEffect(() => {\r\n-    if(isAuth) navigate('/home');\r\n-  }, []);\r\n+  // useEffect(() => {\r\n+  //   if(isAuth) navigate('/home');\r\n+  // }, []);\r\n   \r\n   const { email, password } = inputs;\r\n \r\n   const handleLogin = async (e) => {\r\n"
                },
                {
                    "date": 1720606754364,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -19,11 +19,11 @@\n     email: \"\",\r\n     password: \"\",\r\n   });\r\n \r\n-  // useEffect(() => {\r\n-  //   if(isAuth) navigate('/home');\r\n-  // }, []);\r\n+  useEffect(() => {\r\n+    if(isAuth) navigate('/home');\r\n+  }, []);\r\n   \r\n   const { email, password } = inputs;\r\n \r\n   const handleLogin = async (e) => {\r\n"
                },
                {
                    "date": 1720606790839,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -19,11 +19,11 @@\n     email: \"\",\r\n     password: \"\",\r\n   });\r\n \r\n-  useEffect(() => {\r\n-    if(isAuth) navigate('/home');\r\n-  }, []);\r\n+  // useEffect(() => {\r\n+  //   if(isAuth) navigate('/home');\r\n+  // }, []);\r\n   \r\n   const { email, password } = inputs;\r\n \r\n   const handleLogin = async (e) => {\r\n"
                },
                {
                    "date": 1720608355573,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -37,9 +37,9 @@\n     });\r\n \r\n     const parseRs = await response.json();\r\n \r\n-    const refToken = parseRs.refToken;\r\n+    const refToken = await parseRs.refToken;\r\n \r\n     sessionStorage.setItem('refToken', refToken);\r\n \r\n     if (!parseRs.error) {\r\n"
                },
                {
                    "date": 1720608373924,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,106 @@\n+import {\r\n+Button,\r\n+TextInput\r\n+} from \"../../../styles/components\";\r\n+\r\n+import {Link, useNavigate} from \"react-router-dom\";\r\n+import {EMAIL_REGEX, PASSWORD_REGEX, SERVERLINK} from \"../../../constants\";\r\n+import { useState, useEffect } from \"react\";\r\n+import {useAuth} from \"../../../context/AuthProvider.jsx\";\r\n+import {useForm} from \"../../../context/FormProvider.jsx\";\r\n+\r\n+const Login = () => {\r\n+  const { setErrorData, errorData, login, isAuth} = useAuth();\r\n+  const { handleInputChange, handleError } = useForm();\r\n+  \r\n+  const navigate = useNavigate();\r\n+  \r\n+  const [inputs, setInputs] = useState({\r\n+    email: \"\",\r\n+    password: \"\",\r\n+  });\r\n+\r\n+  // useEffect(() => {\r\n+  //   if(isAuth) navigate('/home');\r\n+  // }, []);\r\n+  \r\n+  const { email, password } = inputs;\r\n+\r\n+  const handleLogin = async (e) => {\r\n+    e.preventDefault();\r\n+\r\n+    const body = { email, password };\r\n+    const response = await fetch(SERVERLINK + \"/api/auth/login\", {\r\n+      method: \"POST\",\r\n+      headers: { \"Content-Type\": \"application/json\" },\r\n+      body: JSON.stringify(body),\r\n+    });\r\n+\r\n+    const parseRs = await response.json();\r\n+\r\n+    const refToken = await parseRs.refToken;\r\n+\r\n+    sessionStorage.setItem('refToken', refToken);\r\n+\r\n+    if (!parseRs.error) {\r\n+      console.log(parseRs);\r\n+      await login(parseRs);\r\n+    }\r\n+    console.log(parseRs.error);\r\n+  };\r\n+\r\n+  return (\r\n+    <section className=\"w-fullscreen bg-gray-80 auth-section space-y-[128px] absolute top-[128px] left-1/2 -translate-x-1/2 \">\r\n+      <div className=\"h1 text-subtitle-1 w-full text-center\">\r\n+        Connecter vous dans votre compte\r\n+        <span className=\"text-primary-100\"> Media Trans</span>\r\n+      </div>\r\n+      {/* Main Form */}\r\n+      <div className=\"flex flex-col items-center justify-center\">\r\n+        <form\r\n+          className=\"flex flex-col  items-start justify-center gap-[32px] w-fit p-6 border border-black-0 rounded-xl\"\r\n+          onSubmit={handleLogin}\r\n+        >\r\n+          <div className=\"flex flex-col items-center w-full justify-center gap-6\">\r\n+            <TextInput\r\n+              title=\"Email\"\r\n+              type=\"text\"\r\n+              placeholder=\"Entrer votre email\"\r\n+              name=\"email\"\r\n+              id=\"email\"\r\n+              errorMsg=\"Email incorrecte\"\r\n+              pattern={EMAIL_REGEX}\r\n+              value={inputs.email}\r\n+              onError={handleError(setErrorData)}\r\n+              onChange={(e) => handleInputChange(setInputs, e)}\r\n+            />\r\n+            <TextInput\r\n+              title=\"Mot de passe\"\r\n+              type=\"password\"\r\n+              placeholder=\"Entrer votre mot de passe\"\r\n+              name=\"password\"\r\n+              pattern={PASSWORD_REGEX}\r\n+              errorMsg=\"Entrer une mot de passe valide\"\r\n+              id=\"password\"\r\n+              onError={handleError(setErrorData)}\r\n+              onChange={(e) => handleInputChange(setInputs, e)}\r\n+              value={inputs.password}\r\n+            />\r\n+          </div>\r\n+          <a href=\"\\mdp\" className=\"text-small-1 underline text-primary-100\">\r\n+            Mot de passe oublié\r\n+          </a>\r\n+          <Button disabled={errorData.email ||errorData.password} block>Se connecter</Button>\r\n+          <p className=\"text-small-1 text-black-80\">\r\n+            Pas encore de compte ?{\" \"}\r\n+            <Link to=\"/registerAccountType\" className=\"text-primary-100 underline\">\r\n+              Créer un compte\r\n+            </Link>\r\n+          </p>\r\n+        </form>\r\n+      </div>\r\n+    </section>\r\n+  );\r\n+};\r\n+\r\n+export default Login;\r\n"
                },
                {
                    "date": 1720608692835,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,106 @@\n+import {\r\n+Button,\r\n+TextInput\r\n+} from \"../../../styles/components\";\r\n+\r\n+import {Link, useNavigate} from \"react-router-dom\";\r\n+import {EMAIL_REGEX, PASSWORD_REGEX, SERVERLINK} from \"../../../constants\";\r\n+import { useState, useEffect } from \"react\";\r\n+import {useAuth} from \"../../../context/AuthProvider.jsx\";\r\n+import {useForm} from \"../../../context/FormProvider.jsx\";\r\n+\r\n+const Login = () => {\r\n+  const { setErrorData, errorData, login, isAuth} = useAuth();\r\n+  const { handleInputChange, handleError } = useForm();\r\n+  \r\n+  const navigate = useNavigate();\r\n+  \r\n+  const [inputs, setInputs] = useState({\r\n+    email: \"\",\r\n+    password: \"\",\r\n+  });\r\n+\r\n+  // useEffect(() => {\r\n+  //   if(isAuth) navigate('/home');\r\n+  // }, []);\r\n+  \r\n+  const { email, password } = inputs;\r\n+\r\n+  const handleLogin = async (e) => {\r\n+    e.preventDefault();\r\n+\r\n+    const body = { email, password };\r\n+    const response = await fetch(SERVERLINK + \"/api/auth/login\", {\r\n+      method: \"POST\",\r\n+      headers: { \"Content-Type\": \"application/json\" },\r\n+      body: JSON.stringify(body),\r\n+    });\r\n+\r\n+    const parseRs = await response.json();\r\n+\r\n+    const refToken = await parseRs.refToken;\r\n+\r\n+    sessionStorage.setItem('refToken', refToken);\r\n+\r\n+    if (!parseRs.error) {\r\n+      console.log(parseRs);\r\n+      await login(parseRs);\r\n+    }\r\n+    console.log(parseRs.error);\r\n+  };\r\n+\r\n+  return (\r\n+    <section className=\"w-fullscreen bg-gray-80 auth-section space-y-[128px] absolute top-[128px] left-1/2 -translate-x-1/2 \">\r\n+      <div className=\"h1 text-subtitle-1 w-full text-center\">\r\n+        Connecter vous dans votre compte\r\n+        <span className=\"text-primary-100\"> Media Trans</span>\r\n+      </div>\r\n+      {/* Main Form */}\r\n+      <div className=\"flex flex-col items-center justify-center\">\r\n+        <form\r\n+          className=\"flex flex-col  items-start justify-center gap-[32px] w-fit p-6 border border-black-0 rounded-xl\"\r\n+          onSubmit={handleLogin}\r\n+        >\r\n+          <div className=\"flex flex-col items-center w-full justify-center gap-6\">\r\n+            <TextInput\r\n+              title=\"Email\"\r\n+              type=\"text\"\r\n+              placeholder=\"Entrer votre email\"\r\n+              name=\"email\"\r\n+              id=\"email\"\r\n+              errorMsg=\"Email incorrecte\"\r\n+              pattern={EMAIL_REGEX}\r\n+              value={inputs.email}\r\n+              onError={handleError(setErrorData)}\r\n+              onChange={(e) => handleInputChange(setInputs, e)}\r\n+            />\r\n+            <TextInput\r\n+              title=\"Mot de passe\"\r\n+              type=\"password\"\r\n+              placeholder=\"Entrer votre mot de passe\"\r\n+              name=\"password\"\r\n+              pattern={PASSWORD_REGEX}\r\n+              errorMsg=\"Entrer une mot de passe valide\"\r\n+              id=\"password\"\r\n+              onError={handleError(setErrorData)}\r\n+              onChange={(e) => handleInputChange(setInputs, e)}\r\n+              value={inputs.password}\r\n+            />\r\n+          </div>\r\n+          <a href=\"\\mdp\" className=\"text-small-1 underline text-primary-100\">\r\n+            Mot de passe oublié\r\n+          </a>\r\n+          <Button disabled={errorData.email ||errorData.password} block>Se connecter</Button>\r\n+          <p className=\"text-small-1 text-black-80\">\r\n+            Pas encore de compte ?{\" \"}\r\n+            <Link to=\"/registerAccountType\" className=\"text-primary-100 underline\">\r\n+              Créer un compte\r\n+            </Link>\r\n+          </p>\r\n+        </form>\r\n+      </div>\r\n+    </section>\r\n+  );\r\n+};\r\n+\r\n+export default Login;\r\n"
                },
                {
                    "date": 1720608718824,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,106 @@\n+import {\r\n+Button,\r\n+TextInput\r\n+} from \"../../../styles/components\";\r\n+\r\n+import {Link, useNavigate} from \"react-router-dom\";\r\n+import {EMAIL_REGEX, PASSWORD_REGEX, SERVERLINK} from \"../../../constants\";\r\n+import { useState, useEffect } from \"react\";\r\n+import {useAuth} from \"../../../context/AuthProvider.jsx\";\r\n+import {useForm} from \"../../../context/FormProvider.jsx\";\r\n+\r\n+const Login = () => {\r\n+  const { setErrorData, errorData, login, isAuth} = useAuth();\r\n+  const { handleInputChange, handleError } = useForm();\r\n+  \r\n+  const navigate = useNavigate();\r\n+  \r\n+  const [inputs, setInputs] = useState({\r\n+    email: \"\",\r\n+    password: \"\",\r\n+  });\r\n+\r\n+  // useEffect(() => {\r\n+  //   if(isAuth) navigate('/home');\r\n+  // }, []);\r\n+  \r\n+  const { email, password } = inputs;\r\n+\r\n+  const handleLogin = async (e) => {\r\n+    e.preventDefault();\r\n+\r\n+    const body = { email, password };\r\n+    const response = await fetch(SERVERLINK + \"/api/auth/login\", {\r\n+      method: \"POST\",\r\n+      headers: { \"Content-Type\": \"application/json\" },\r\n+      body: JSON.stringify(body),\r\n+    });\r\n+\r\n+    const parseRs = await response.json();\r\n+\r\n+    const refToken = await parseRs.refToken;\r\n+\r\n+    sessionStorage.setItem('refToken', refToken);\r\n+\r\n+    if (!parseRs.error) {\r\n+      console.log(parseRs);\r\n+      await login(parseRs);\r\n+    }\r\n+    console.log(parseRs.error);\r\n+  };\r\n+\r\n+  return (\r\n+    <section className=\"w-fullscreen bg-gray-80 auth-section space-y-[128px] absolute top-[128px] left-1/2 -translate-x-1/2 \">\r\n+      <div className=\"h1 text-subtitle-1 w-full text-center\">\r\n+        Connecter vous dans votre compte\r\n+        <span className=\"text-primary-100\"> Media Trans</span>\r\n+      </div>\r\n+      {/* Main Form */}\r\n+      <div className=\"flex flex-col items-center justify-center\">\r\n+        <form\r\n+          className=\"flex flex-col  items-start justify-center gap-[32px] w-fit p-6 border border-black-0 rounded-xl\"\r\n+          onSubmit={handleLogin}\r\n+        >\r\n+          <div className=\"flex flex-col items-center w-full justify-center gap-6\">\r\n+            <TextInput\r\n+              title=\"Email\"\r\n+              type=\"text\"\r\n+              placeholder=\"Entrer votre email\"\r\n+              name=\"email\"\r\n+              id=\"email\"\r\n+              errorMsg=\"Email incorrecte\"\r\n+              pattern={EMAIL_REGEX}\r\n+              value={inputs.email}\r\n+              onError={handleError(setErrorData)}\r\n+              onChange={(e) => handleInputChange(setInputs, e)}\r\n+            />\r\n+            <TextInput\r\n+              title=\"Mot de passe\"\r\n+              type=\"password\"\r\n+              placeholder=\"Entrer votre mot de passe\"\r\n+              name=\"password\"\r\n+              pattern={PASSWORD_REGEX}\r\n+              errorMsg=\"Entrer une mot de passe valide\"\r\n+              id=\"password\"\r\n+              onError={handleError(setErrorData)}\r\n+              onChange={(e) => handleInputChange(setInputs, e)}\r\n+              value={inputs.password}\r\n+            />\r\n+          </div>\r\n+          <a href=\"\\mdp\" className=\"text-small-1 underline text-primary-100\">\r\n+            Mot de passe oublié\r\n+          </a>\r\n+          <Button disabled={errorData.email ||errorData.password} block>Se connecter</Button>\r\n+          <p className=\"text-small-1 text-black-80\">\r\n+            Pas encore de compte ?{\" \"}\r\n+            <Link to=\"/registerAccountType\" className=\"text-primary-100 underline\">\r\n+              Créer un compte\r\n+            </Link>\r\n+          </p>\r\n+        </form>\r\n+      </div>\r\n+    </section>\r\n+  );\r\n+};\r\n+\r\n+export default Login;\r\n"
                },
                {
                    "date": 1720608728438,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -103,322 +103,4 @@\n   );\r\n };\r\n \r\n export default Login;\r\n-import {\r\n-Button,\r\n-TextInput\r\n-} from \"../../../styles/components\";\r\n-\r\n-import {Link, useNavigate} from \"react-router-dom\";\r\n-import {EMAIL_REGEX, PASSWORD_REGEX, SERVERLINK} from \"../../../constants\";\r\n-import { useState, useEffect } from \"react\";\r\n-import {useAuth} from \"../../../context/AuthProvider.jsx\";\r\n-import {useForm} from \"../../../context/FormProvider.jsx\";\r\n-\r\n-const Login = () => {\r\n-  const { setErrorData, errorData, login, isAuth} = useAuth();\r\n-  const { handleInputChange, handleError } = useForm();\r\n-  \r\n-  const navigate = useNavigate();\r\n-  \r\n-  const [inputs, setInputs] = useState({\r\n-    email: \"\",\r\n-    password: \"\",\r\n-  });\r\n-\r\n-  // useEffect(() => {\r\n-  //   if(isAuth) navigate('/home');\r\n-  // }, []);\r\n-  \r\n-  const { email, password } = inputs;\r\n-\r\n-  const handleLogin = async (e) => {\r\n-    e.preventDefault();\r\n-\r\n-    const body = { email, password };\r\n-    const response = await fetch(SERVERLINK + \"/api/auth/login\", {\r\n-      method: \"POST\",\r\n-      headers: { \"Content-Type\": \"application/json\" },\r\n-      body: JSON.stringify(body),\r\n-    });\r\n-\r\n-    const parseRs = await response.json();\r\n-\r\n-    const refToken = await parseRs.refToken;\r\n-\r\n-    sessionStorage.setItem('refToken', refToken);\r\n-\r\n-    if (!parseRs.error) {\r\n-      console.log(parseRs);\r\n-      await login(parseRs);\r\n-    }\r\n-    console.log(parseRs.error);\r\n-  };\r\n-\r\n-  return (\r\n-    <section className=\"w-fullscreen bg-gray-80 auth-section space-y-[128px] absolute top-[128px] left-1/2 -translate-x-1/2 \">\r\n-      <div className=\"h1 text-subtitle-1 w-full text-center\">\r\n-        Connecter vous dans votre compte\r\n-        <span className=\"text-primary-100\"> Media Trans</span>\r\n-      </div>\r\n-      {/* Main Form */}\r\n-      <div className=\"flex flex-col items-center justify-center\">\r\n-        <form\r\n-          className=\"flex flex-col  items-start justify-center gap-[32px] w-fit p-6 border border-black-0 rounded-xl\"\r\n-          onSubmit={handleLogin}\r\n-        >\r\n-          <div className=\"flex flex-col items-center w-full justify-center gap-6\">\r\n-            <TextInput\r\n-              title=\"Email\"\r\n-              type=\"text\"\r\n-              placeholder=\"Entrer votre email\"\r\n-              name=\"email\"\r\n-              id=\"email\"\r\n-              errorMsg=\"Email incorrecte\"\r\n-              pattern={EMAIL_REGEX}\r\n-              value={inputs.email}\r\n-              onError={handleError(setErrorData)}\r\n-              onChange={(e) => handleInputChange(setInputs, e)}\r\n-            />\r\n-            <TextInput\r\n-              title=\"Mot de passe\"\r\n-              type=\"password\"\r\n-              placeholder=\"Entrer votre mot de passe\"\r\n-              name=\"password\"\r\n-              pattern={PASSWORD_REGEX}\r\n-              errorMsg=\"Entrer une mot de passe valide\"\r\n-              id=\"password\"\r\n-              onError={handleError(setErrorData)}\r\n-              onChange={(e) => handleInputChange(setInputs, e)}\r\n-              value={inputs.password}\r\n-            />\r\n-          </div>\r\n-          <a href=\"\\mdp\" className=\"text-small-1 underline text-primary-100\">\r\n-            Mot de passe oublié\r\n-          </a>\r\n-          <Button disabled={errorData.email ||errorData.password} block>Se connecter</Button>\r\n-          <p className=\"text-small-1 text-black-80\">\r\n-            Pas encore de compte ?{\" \"}\r\n-            <Link to=\"/registerAccountType\" className=\"text-primary-100 underline\">\r\n-              Créer un compte\r\n-            </Link>\r\n-          </p>\r\n-        </form>\r\n-      </div>\r\n-    </section>\r\n-  );\r\n-};\r\n-\r\n-export default Login;\r\n-import {\r\n-Button,\r\n-TextInput\r\n-} from \"../../../styles/components\";\r\n-\r\n-import {Link, useNavigate} from \"react-router-dom\";\r\n-import {EMAIL_REGEX, PASSWORD_REGEX, SERVERLINK} from \"../../../constants\";\r\n-import { useState, useEffect } from \"react\";\r\n-import {useAuth} from \"../../../context/AuthProvider.jsx\";\r\n-import {useForm} from \"../../../context/FormProvider.jsx\";\r\n-\r\n-const Login = () => {\r\n-  const { setErrorData, errorData, login, isAuth} = useAuth();\r\n-  const { handleInputChange, handleError } = useForm();\r\n-  \r\n-  const navigate = useNavigate();\r\n-  \r\n-  const [inputs, setInputs] = useState({\r\n-    email: \"\",\r\n-    password: \"\",\r\n-  });\r\n-\r\n-  // useEffect(() => {\r\n-  //   if(isAuth) navigate('/home');\r\n-  // }, []);\r\n-  \r\n-  const { email, password } = inputs;\r\n-\r\n-  const handleLogin = async (e) => {\r\n-    e.preventDefault();\r\n-\r\n-    const body = { email, password };\r\n-    const response = await fetch(SERVERLINK + \"/api/auth/login\", {\r\n-      method: \"POST\",\r\n-      headers: { \"Content-Type\": \"application/json\" },\r\n-      body: JSON.stringify(body),\r\n-    });\r\n-\r\n-    const parseRs = await response.json();\r\n-\r\n-    const refToken = await parseRs.refToken;\r\n-\r\n-    sessionStorage.setItem('refToken', refToken);\r\n-\r\n-    if (!parseRs.error) {\r\n-      console.log(parseRs);\r\n-      await login(parseRs);\r\n-    }\r\n-    console.log(parseRs.error);\r\n-  };\r\n-\r\n-  return (\r\n-    <section className=\"w-fullscreen bg-gray-80 auth-section space-y-[128px] absolute top-[128px] left-1/2 -translate-x-1/2 \">\r\n-      <div className=\"h1 text-subtitle-1 w-full text-center\">\r\n-        Connecter vous dans votre compte\r\n-        <span className=\"text-primary-100\"> Media Trans</span>\r\n-      </div>\r\n-      {/* Main Form */}\r\n-      <div className=\"flex flex-col items-center justify-center\">\r\n-        <form\r\n-          className=\"flex flex-col  items-start justify-center gap-[32px] w-fit p-6 border border-black-0 rounded-xl\"\r\n-          onSubmit={handleLogin}\r\n-        >\r\n-          <div className=\"flex flex-col items-center w-full justify-center gap-6\">\r\n-            <TextInput\r\n-              title=\"Email\"\r\n-              type=\"text\"\r\n-              placeholder=\"Entrer votre email\"\r\n-              name=\"email\"\r\n-              id=\"email\"\r\n-              errorMsg=\"Email incorrecte\"\r\n-              pattern={EMAIL_REGEX}\r\n-              value={inputs.email}\r\n-              onError={handleError(setErrorData)}\r\n-              onChange={(e) => handleInputChange(setInputs, e)}\r\n-            />\r\n-            <TextInput\r\n-              title=\"Mot de passe\"\r\n-              type=\"password\"\r\n-              placeholder=\"Entrer votre mot de passe\"\r\n-              name=\"password\"\r\n-              pattern={PASSWORD_REGEX}\r\n-              errorMsg=\"Entrer une mot de passe valide\"\r\n-              id=\"password\"\r\n-              onError={handleError(setErrorData)}\r\n-              onChange={(e) => handleInputChange(setInputs, e)}\r\n-              value={inputs.password}\r\n-            />\r\n-          </div>\r\n-          <a href=\"\\mdp\" className=\"text-small-1 underline text-primary-100\">\r\n-            Mot de passe oublié\r\n-          </a>\r\n-          <Button disabled={errorData.email ||errorData.password} block>Se connecter</Button>\r\n-          <p className=\"text-small-1 text-black-80\">\r\n-            Pas encore de compte ?{\" \"}\r\n-            <Link to=\"/registerAccountType\" className=\"text-primary-100 underline\">\r\n-              Créer un compte\r\n-            </Link>\r\n-          </p>\r\n-        </form>\r\n-      </div>\r\n-    </section>\r\n-  );\r\n-};\r\n-\r\n-export default Login;\r\n-import {\r\n-Button,\r\n-TextInput\r\n-} from \"../../../styles/components\";\r\n-\r\n-import {Link, useNavigate} from \"react-router-dom\";\r\n-import {EMAIL_REGEX, PASSWORD_REGEX, SERVERLINK} from \"../../../constants\";\r\n-import { useState, useEffect } from \"react\";\r\n-import {useAuth} from \"../../../context/AuthProvider.jsx\";\r\n-import {useForm} from \"../../../context/FormProvider.jsx\";\r\n-\r\n-const Login = () => {\r\n-  const { setErrorData, errorData, login, isAuth} = useAuth();\r\n-  const { handleInputChange, handleError } = useForm();\r\n-  \r\n-  const navigate = useNavigate();\r\n-  \r\n-  const [inputs, setInputs] = useState({\r\n-    email: \"\",\r\n-    password: \"\",\r\n-  });\r\n-\r\n-  // useEffect(() => {\r\n-  //   if(isAuth) navigate('/home');\r\n-  // }, []);\r\n-  \r\n-  const { email, password } = inputs;\r\n-\r\n-  const handleLogin = async (e) => {\r\n-    e.preventDefault();\r\n-\r\n-    const body = { email, password };\r\n-    const response = await fetch(SERVERLINK + \"/api/auth/login\", {\r\n-      method: \"POST\",\r\n-      headers: { \"Content-Type\": \"application/json\" },\r\n-      body: JSON.stringify(body),\r\n-    });\r\n-\r\n-    const parseRs = await response.json();\r\n-\r\n-    const refToken = await parseRs.refToken;\r\n-\r\n-    sessionStorage.setItem('refToken', refToken);\r\n-\r\n-    if (!parseRs.error) {\r\n-      console.log(parseRs);\r\n-      await login(parseRs);\r\n-    }\r\n-    console.log(parseRs.error);\r\n-  };\r\n-\r\n-  return (\r\n-    <section className=\"w-fullscreen bg-gray-80 auth-section space-y-[128px] absolute top-[128px] left-1/2 -translate-x-1/2 \">\r\n-      <div className=\"h1 text-subtitle-1 w-full text-center\">\r\n-        Connecter vous dans votre compte\r\n-        <span className=\"text-primary-100\"> Media Trans</span>\r\n-      </div>\r\n-      {/* Main Form */}\r\n-      <div className=\"flex flex-col items-center justify-center\">\r\n-        <form\r\n-          className=\"flex flex-col  items-start justify-center gap-[32px] w-fit p-6 border border-black-0 rounded-xl\"\r\n-          onSubmit={handleLogin}\r\n-        >\r\n-          <div className=\"flex flex-col items-center w-full justify-center gap-6\">\r\n-            <TextInput\r\n-              title=\"Email\"\r\n-              type=\"text\"\r\n-              placeholder=\"Entrer votre email\"\r\n-              name=\"email\"\r\n-              id=\"email\"\r\n-              errorMsg=\"Email incorrecte\"\r\n-              pattern={EMAIL_REGEX}\r\n-              value={inputs.email}\r\n-              onError={handleError(setErrorData)}\r\n-              onChange={(e) => handleInputChange(setInputs, e)}\r\n-            />\r\n-            <TextInput\r\n-              title=\"Mot de passe\"\r\n-              type=\"password\"\r\n-              placeholder=\"Entrer votre mot de passe\"\r\n-              name=\"password\"\r\n-              pattern={PASSWORD_REGEX}\r\n-              errorMsg=\"Entrer une mot de passe valide\"\r\n-              id=\"password\"\r\n-              onError={handleError(setErrorData)}\r\n-              onChange={(e) => handleInputChange(setInputs, e)}\r\n-              value={inputs.password}\r\n-            />\r\n-          </div>\r\n-          <a href=\"\\mdp\" className=\"text-small-1 underline text-primary-100\">\r\n-            Mot de passe oublié\r\n-          </a>\r\n-          <Button disabled={errorData.email ||errorData.password} block>Se connecter</Button>\r\n-          <p className=\"text-small-1 text-black-80\">\r\n-            Pas encore de compte ?{\" \"}\r\n-            <Link to=\"/registerAccountType\" className=\"text-primary-100 underline\">\r\n-              Créer un compte\r\n-            </Link>\r\n-          </p>\r\n-        </form>\r\n-      </div>\r\n-    </section>\r\n-  );\r\n-};\r\n-\r\n-export default Login;\r\n"
                }
            ],
            "date": 1720605306017,
            "name": "Commit-0",
            "content": "import {\r\nButton,\r\nTextInput\r\n} from \"../../../styles/components\";\r\n\r\nimport {Link, useNavigate} from \"react-router-dom\";\r\nimport {EMAIL_REGEX, PASSWORD_REGEX, SERVERLINK} from \"../../../constants\";\r\nimport { useState, useEffect } from \"react\";\r\nimport {useAuth} from \"../../../context/AuthProvider.jsx\";\r\nimport {useForm} from \"../../../context/FormProvider.jsx\";\r\n\r\nconst Login = () => {\r\n  const { setErrorData, errorData, login, isAuth} = useAuth();\r\n  const { handleInputChange, handleError } = useForm();\r\n  \r\n  const navigate = useNavigate();\r\n  \r\n  const [inputs, setInputs] = useState({\r\n    email: \"\",\r\n    password: \"\",\r\n  });\r\n\r\n  // useEffect(() => {\r\n  //   if(isAuth) navigate('/home');\r\n  // }, []);\r\n  \r\n  const { email, password } = inputs;\r\n\r\n  const handleLogin = async (e) => {\r\n    e.preventDefault();\r\n\r\n    const body = { email, password };\r\n    const response = await fetch(SERVERLINK + \"/api/auth/login\", {\r\n      method: \"POST\",\r\n      headers: { \"Content-Type\": \"application/json\" },\r\n      body: JSON.stringify(body),\r\n    });\r\n\r\n    const parseRs = await response.json();\r\n\r\n    const refToken = parseRs.refToken;\r\n\r\n    sessionStorage.setItem('refToken', refToken);\r\n\r\n    if (!parseRs.error) {\r\n      console.log(parseRs);\r\n      await login(parseRs);\r\n    }\r\n    console.log(parseRs.error);\r\n  };\r\n\r\n  return (\r\n    <section className=\"w-fullscreen bg-gray-80 auth-section space-y-[128px] absolute top-[128px] left-1/2 -translate-x-1/2 \">\r\n      <div className=\"h1 text-subtitle-1 w-full text-center\">\r\n        Connecter vous dans votre compte\r\n        <span className=\"text-primary-100\"> Media Trans</span>\r\n      </div>\r\n      {/* Main Form */}\r\n      <div className=\"flex flex-col items-center justify-center\">\r\n        <form\r\n          className=\"flex flex-col  items-start justify-center gap-[32px] w-fit p-6 border border-black-0 rounded-xl\"\r\n          onSubmit={handleLogin}\r\n        >\r\n          <div className=\"flex flex-col items-center w-full justify-center gap-6\">\r\n            <TextInput\r\n              title=\"Email\"\r\n              type=\"text\"\r\n              placeholder=\"Entrer votre email\"\r\n              name=\"email\"\r\n              id=\"email\"\r\n              errorMsg=\"Email incorrecte\"\r\n              pattern={EMAIL_REGEX}\r\n              value={inputs.email}\r\n              onError={handleError(setErrorData)}\r\n              onChange={(e) => handleInputChange(setInputs, e)}\r\n            />\r\n            <TextInput\r\n              title=\"Mot de passe\"\r\n              type=\"password\"\r\n              placeholder=\"Entrer votre mot de passe\"\r\n              name=\"password\"\r\n              pattern={PASSWORD_REGEX}\r\n              errorMsg=\"Entrer une mot de passe valide\"\r\n              id=\"password\"\r\n              onError={handleError(setErrorData)}\r\n              onChange={(e) => handleInputChange(setInputs, e)}\r\n              value={inputs.password}\r\n            />\r\n          </div>\r\n          <a href=\"\\mdp\" className=\"text-small-1 underline text-primary-100\">\r\n            Mot de passe oublié\r\n          </a>\r\n          <Button disabled={errorData.email ||errorData.password} block>Se connecter</Button>\r\n          <p className=\"text-small-1 text-black-80\">\r\n            Pas encore de compte ?{\" \"}\r\n            <Link to=\"/registerAccountType\" className=\"text-primary-100 underline\">\r\n              Créer un compte\r\n            </Link>\r\n          </p>\r\n        </form>\r\n      </div>\r\n    </section>\r\n  );\r\n};\r\n\r\nexport default Login;\r\n"
        }
    ]
}